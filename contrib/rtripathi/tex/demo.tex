\documentclass[12pt]{article}
\usepackage[procnames]{listings}

\usepackage{color}
\usepackage{textcomp}
\definecolor{listinggray}{gray}{0.9}
\definecolor{lbcolor}{rgb}{0.9,0.9,0.9}

\newcommand{\backtick}{{\texttt{\char"12}}}

\newlength{\toppush}
\setlength{\toppush}{2\headheight}
\addtolength{\toppush}{\headsep}
\setlength{\oddsidemargin}{0pt}
\setlength{\evensidemargin}{0pt}
\setlength{\textwidth}{6.5in}
\setlength{\topmargin}{0in}
\setlength{\textheight}{8.5in}

\lstset{ %from http://www.tjansson.dk/?p=419
	backgroundcolor=\color{lbcolor},
	tabsize=4,
	rulecolor=,
	language=q,
        basicstyle=\small,
        upquote=false;
        aboveskip={1.5\baselineskip},
        columns=fixed,
        showstringspaces=false,
        extendedchars=true,
        breaklines=true,
        prebreak = \raisebox{0ex}[0ex][0ex]{\ensuremath{\hookleftarrow}},
        frame=single,
        showtabs=false,
        showspaces=false,
        showstringspaces=false,
        identifierstyle=\ttfamily,
        keywordstyle=\color[rgb]{0,0,1},
        commentstyle=\color[rgb]{0.133,0.545,0.133},
        stringstyle=\color[rgb]{0.627,0.126,0.941},
}
\begin{document} %uses bell.q as an example
\lstinputlisting[language=q,firstline=0,lastline=53]{../../../kx/kdb+/bell.q}
\end{document}
